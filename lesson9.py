import random  # модуль для случайных чисел

print("Добро пожаловать в мини-RPG!")
name = input("Как тебя зовут, герой? ")

print()
print("Привет,", name + "!")
print("Ты заходишь в старое подземелье. Впереди развилка: ЛЕВО и ПРАВО.")
print("Твоя задача — выжить и победить монстра.\n")

# базовые характеристики героя
player_hp = 10   # здоровье
player_potion = False  # есть ли зелье лечения

# выбор пути
print("Куда пойдёшь?")
print("1 - Пойти налево (тусклый коридор)")
print("2 - Пойти направо (коридор с факелами)")

choice = input("Введи 1 или 2: ")

print()

if choice == "1":
    print("Ты осторожно идёшь по тёмному коридору...")
    print("Натыкаешься на старый сундук и находишь ЗЕЛЬЕ ЛЕЧЕНИЯ! (+3 HP)\n")
    player_potion = True
elif choice == "2":
    print("Ты идёшь по освещённому коридору.")
    print("Здесь безопасно, но ничего полезного нет.\n")
else:
    print("Ты долго сомневался и в итоге пошёл прямо...")
    print("К сожалению, это тупик. Приходится вернуться обратно.")
    print("Пока ты метался, монстр сам тебя нашёл.\n")

print("Перед тобой появляется МОНСТР-СТРАЖНИК!")
monster_hp = 8

print("Бой начинается!")
print("------------------------")

attempt = 1

while player_hp > 0 and monster_hp > 0:
    print()
    print("Ход номер", attempt)
    print("Твоё здоровье:", player_hp)
    print("Здоровье монстра:", monster_hp)
    print()
    print("Выбери действие:")
    print("1 - Удар мечом")
    print("2 - Защита (получишь меньше урона)")
    if player_potion:
        print("3 - Выпить зелье лечения (+3 HP, можно один раз)")
    print("0 - Попробовать убежать")

    action = input("Твой выбор: ")
    print()

    if action == "1":
        # атака
        damage = random.randint(2, 4)
        print("Ты бьёшь мечом и наносишь", damage, "урона!")
        monster_hp -= damage

    elif action == "2":
        # защита
        print("Ты поднимаешь щит и готовишься к удару.")
        # специального эффекта здесь нет, он будет ниже в уроне монстра

    elif action == "3" and player_potion:
        print("Ты выпиваешь зелье. +3 к здоровью!")
        player_hp += 3
        player_potion = False  # зелье закончено

    elif action == "0":
        # попытка побега
        escape_chance = random.randint(1, 4)  # 1 шанс из 4 сбежать
        if escape_chance == 1:
            print("Тебе чудом удаётся убежать от монстра!")
            print("Игра окончена. Ты выжил, но монстр остался в подземелье.")
            break
        else:
            print("Не получилось убежать! Монстр перегородил дорогу.")

    else:
        print("Ты мешкаешь и ничего полезного не делаешь...")

    # проверяем, жив ли монстр
    if monster_hp <= 0:
        print("\nМонстр повержен! Ты победил!")
        break

    # ХОД МОНСТРА
    print("Монстр готовится атаковать...")

    if action == "2":
        # ты был в защите — уменьшаем урон
        monster_damage = random.randint(0, 2)
        print("Ты в защите, часть удара блокирована.")
    else:
        monster_damage = random.randint(1, 4)

    print("Монстр наносит тебе", monster_damage, "урона!")
    player_hp -= monster_damage

    attempt += 1

# после цикла — финальный результат, если не убежал
if player_hp <= 0:
    print("\nТвоё здоровье упало до нуля.")
    print("Монстр победил... Но ты можешь запустить игру снова и отомстить!")
elif monster_hp <= 0:
    print("\nПоздравляю,", name + "!")
    print("Ты очистил подземелье от монстра и вышел на свет героем!")
else:
    # сюда мы попадаем, если сбежали (break из цикла)
    pass

print("\nИгра завершена. Спасибо за игру!")
